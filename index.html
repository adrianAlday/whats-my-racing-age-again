<!DOCTYPE html>
  <html>
    <head>
      <title>What's My Racing Age Again?</title>
      <script type="text/javascript">

        function handleBirthYear(){
            const month         = ( new Date() ).getMonth() + 1;
            const thisYear      = ( new Date() ).getFullYear();
            const nextYear      = thisYear + 1;
            const cxYear4Char   = (month > 2) ? nextYear : thisYear;
            const cxYearLabel1  = parseInt( cxYear4Char - 1);
            const cxYear2Char   = parseInt( cxYear4Char - 2000 );
            const thisYear2Char = parseInt( thisYear    - 2000 );
            document.getElementById("cxYearLabel1").value = cxYearLabel1;
            document.getElementById("cxYear2Char").value  = cxYear2Char;
            document.getElementById("thisYear").value     = thisYear;
            const recYear1String  = ( document.getElementById("inYear1") ).value;
            const recYear2String  = ( document.getElementById("inYear2") ).value;
            const comboYear2Char  = 10 * parseInt(recYear1String) + parseInt(recYear2String);
            ( comboYear2Char > cxYear2Char ) ?
              (document.getElementById("cAge").value = cxYear2Char - comboYear2Char + 100 + '!') :
              (document.getElementById("cAge").value = cxYear2Char - comboYear2Char + '!');
            ( comboYear2Char > thisYear2Char ) ?
              (document.getElementById("oAge").value = thisYear2Char - comboYear2Char + 100 + '!') :
              (document.getElementById("oAge").value = thisYear2Char - comboYear2Char + '!');
            if ( recYear1String.length === 1 && recYear2String.length === 1 ) {
              document.getElementById("disc").style = "display:",
              document.getElementById("results").style = "display:"};
          }

        function loadFocus(){
            document.getElementById("inYear1").focus();
          }

      </script>
      <style>

        body{
          font-family:courier;
          font-size: 3
          color:black
        }

        .narrow{
          width:200px;
          word-wrap:break-word;
          margin: 0 auto;
        }

        input{
          font-size: 20px;
          font-family:courier;
          color:black;
          width:16px;}

        .bottom {
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
        }

      </style>
    </head>
    <body onload="loadFocus()">
      <div style="width:100%">
        <div class="narrow">
          <div name="title">
            <font size="6" color="#EA0606">What's My</font>
            <font size="6" color="#079FF9">Racing Age</font>
            <font size="6" color="#EA0606">Again?</font><br /><br />
          </div>
          <div name="birthYear">
            <form oninput="handleBirthYear()">
              <fieldset style="border:">
                <br />Birth year:<br /><br />
                <div style="float:left;">
                  <font size="5">Ê¼</font>
                  <input type="text" id="inYear1" maxlength="1" placeholder="Y" pattern="[0-9]*"/>
                  <input type="text" id="inYear2" maxlength="1" placeholder="Y" pattern="[0-9]*"/><br /><br />
                </div>
              </fieldset>
            </form>
            <br />
          </div>
          <div name="bothAge" style="display:none" id="results">
            <div name="cAge">
              <fieldset style="display:" id="resultC">
                <br />Racing age<br /><br />
                <font size="6" color="#EA0606"><output id="cAge"/></font>
                <br /><br />in <output id="cxYearLabel1"></output>-<output id="cxYear2Char"/></output><br /><br />
              </fieldset>
            </div>
            <div name="oAge">
              <fieldset style="display:none" id="resultO">
                <br />Racing age<br /><br />
                <font size="6" color="#EA0606"><output id="oAge"/></font>
                <br /><br />in <output id="thisYear"></output><br /><br />
              </fieldset>
            </div>
            <br />
          </div>
          <div name="picker">
            <form oninput="handleBirthYear()">
              <fieldset style="display:none" id="disc">
                  <div style="float:left;">
                    <input type="radio" name="discipline" id="cx"    value="cx"    onclick="toggleC()" checked/> cx<br />
                    <input type="radio" name="discipline" id="other" value="other" onclick="toggleO()"/> other
                  </div>
                <br /><br />
              </fieldset>
            </form>
            <br />
          </div>
          <!-- <div name="sillyOuter">
            <font size="2">
              <fieldset style="border:0; display:none" id="sillyBox">
                  <div style="float:left;" id="sillyText">
                    asdf
                  </div>
                <br />
              </fieldset>
            </font>
          </div> -->
          <div name="midi" class='bottom' align="center">
            <audio autoplay loop controls><source src="wmraa.mp3" type="audio/mpeg"></audio>
          </div>
        </div>
      </div>

      <script>

        document.getElementById("inYear1").onkeyup = function(){
          if (this.value.length === parseInt(this.attributes["maxlength"].value)) ( inYear2.focus() );
          }
        document.getElementById("inYear2").onkeyup = function(){
          if (this.value.length === parseInt(this.attributes["maxlength"].value)) ( inYear1.focus() );
          }

        document.getElementById("inYear1").onkeydown = function(){
          this.value=''
          }
        document.getElementById("inYear2").onkeydown = function(){
          this.value=''
          }

        function toggleC(){
            document.getElementById("resultC").style = "";
            document.getElementById("resultO").style = "display:none";
            inYear1.focus();
          }
        function toggleO(){
            document.getElementById("resultC").style = "display:none";
            document.getElementById("resultO").style = "";
            inYear1.focus();
          }

        // var lyrics =
        //   [
        //     "",
        //     "",
        //     "",
        //     "",
        //     "",
        //   ];
        // function sillyLyrics()
        //   {
        //    document.getElementById("sillyText").innerHTML = arr[Math.floor(Math.random() * arr.length)];
        //   }

      </script>
    </body>
  </html>
